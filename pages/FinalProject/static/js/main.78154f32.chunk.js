(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),l=a.n(s),o=a(27),c=a(23),i=a.n(c),u=a(9),m=a(29),p=a(15),d=a(13),h=a(17),f=a(18),b=a(19),g=a(32),v=a(156),E=a(145),y=a(149),O=a(146),j=a(147),S=a(141),w=a(109),k=a(150),U=a(39),C=a.n(U);a(85),a(89);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}C.a.initializeApp({apiKey:"AIzaSyCvfesYxd9sVY9paS_Y1z6BaCtMYpMfHZE",authDomain:"cs4830-final.firebaseapp.com",databaseURL:"https://cs4830-final.firebaseio.com",projectId:"cs4830-final",storageBucket:"cs4830-final.appspot.com",messagingSenderId:"1062419412597",appId:"1:1062419412597:web:0f0e94afd9cf07da43ea3c"});var x=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var n,r,s,l,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=W.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,s=t.email,l=t.photoURL,o=t.occupation,c=t.biography,u=new Date,e.prev=9,e.next=12,n.set(P({displayName:r,email:s,photoURL:l,creationDate:u,occupation:o,biography:c},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),D=C.a.auth(),W=C.a.firestore(),I=new C.a.auth.GoogleAuthProvider;I.setCustomParameters({prompt:"select_account"});var R=function(){return D.signInWithPopup(I)},L=(C.a,a(91),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).handleSubmit=function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.email,s=n.password,console.log(e.state),t.prev=3,t.next=6,D.signInWithEmailAndPassword(r,s);case 6:e.setState({email:"",password:""}),console.log(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n))},e.state={email:"",password:""},e}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{style:{marginTop:20,padding:30}},r.a.createElement(S.a,{container:!0,spacing:10,justify:"center"},r.a.createElement(S.a,{item:!0},r.a.createElement(E.a,{style:{minHeight:400}},r.a.createElement(O.a,null,r.a.createElement(j.a,{color:"textSecondary",align:"center"},"LOGIN"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(v.a,{style:{paddingBottom:10},label:"Email",variant:"outlined",color:"primary",name:"email",type:"email",onChange:this.handleChange,value:t,required:!0,fullWidth:!0}),r.a.createElement(v.a,{style:{paddingBottom:10},label:"Password",variant:"outlined",color:"primary",name:"password",type:"password",value:a,onChange:this.handleChange,required:!0,fullWidth:!0}),r.a.createElement(y.a,null,r.a.createElement(k.a,{fullWidth:!0,"aria-label":"full width outlined button group"},r.a.createElement(w.a,{variant:"contained",color:"inherit",type:"submit"},"Login"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:R},"Sign In With Google")))))))))}}]),t}(r.a.Component)),B=(a(95),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleSignUp=function(){var e=Object(m.a)(i.a.mark((function e(t){var n,r,s,l,o,c,u,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.displayName,s=n.email,l=n.password1,n.password2,o=n.occupation,c=n.biography,e.prev=2,e.next=5,D.createUserWithEmailAndPassword(s,l);case 5:return u=e.sent,m=u.user,e.next=9,x(m,{displayName:r,occupation:o,biography:c});case 9:a.setState({displayName:"",email:"",password1:"",password2:"",occupation:"",biography:""}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(u.a)({},r,n))},a.state={displayName:"",email:"",password1:"",password2:""},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.displayName,a=e.email,n=e.password1,s=e.password2;return r.a.createElement("div",{style:{marginTop:20,padding:30}},r.a.createElement(S.a,{container:!0,spacing:10,justify:"center"},r.a.createElement(S.a,{item:!0},r.a.createElement(E.a,{style:{minHeight:400}},r.a.createElement(O.a,null,r.a.createElement(j.a,{color:"textSecondary",align:"center"},"SIGN UP"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSignUp},r.a.createElement(v.a,{label:"Display Name",variant:"outlined",color:"primary",name:"displayName",type:"text",value:t,onChange:this.handleChange,required:!0,fullWidth:!0,style:{paddingBottom:10}}),r.a.createElement(v.a,{label:"Email",variant:"outlined",color:"primary",name:"email",type:"email",onChange:this.handleChange,value:a,required:!0,fullWidth:!0,style:{paddingBottom:10}}),r.a.createElement(v.a,{style:{paddingBottom:10},label:"Password",variant:"outlined",color:"primary",name:"password1",type:"password",value:n,onChange:this.handleChange,required:!0,fullWidth:!0}),r.a.createElement(v.a,{style:{paddingBottom:10},label:"Confirm Password",variant:"outlined",color:"primary",name:"password2",type:"password",value:s,onChange:this.handleChange,required:!0,fullWidth:!0}),r.a.createElement(y.a,null,r.a.createElement(k.a,{fullWidth:!0,"aria-label":"full width outlined button group"},r.a.createElement(w.a,{variant:"contained",color:"inherit",type:"submit"},"SIGN UP"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:R},"JOIN WITH GOOGLE")))))))))}}]),t}(r.a.Component)),G=(a(96),function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6 l6"},r.a.createElement(L,null)),r.a.createElement("div",{className:"col s12 m6 l6"},r.a.createElement(B,null))))}),M=a(151),A=a(152),H=a(153),T=(a(97),a(154)),q=Object(M.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},avatar:{margin:10}}})),F=function(e){var t=e.currentUser,a=q();return r.a.createElement("div",null,r.a.createElement(A.a,{position:"static",style:{margin:0}},r.a.createElement(H.a,null,t?r.a.createElement("div",null,r.a.createElement(w.a,{color:"inherit"},r.a.createElement(o.b,{className:"dec",to:"/feed"},"FEED")),r.a.createElement(w.a,{color:"inherit"},r.a.createElement(o.b,{className:"dec",to:"/chat"},"CHAT")),r.a.createElement(w.a,{color:"inherit",onClick:function(){return D.signOut()}},r.a.createElement(o.b,{className:"dec",to:"/"},"SIGN OUT")),r.a.createElement(w.a,{color:"inherit"},"Hello, ",t.displayName),t.photoURL?r.a.createElement(T.a,{alt:t.displayName,src:t.photoURL,className:a.avatar}):r.a.createElement("div",null)):r.a.createElement("div",null,r.a.createElement(w.a,{color:"inherit"},r.a.createElement(o.b,{className:"dec",to:"/"},"HOME")),r.a.createElement(w.a,{color:"inherit"},r.a.createElement(o.b,{className:"dec",to:"/signin"},"SIGN IN"))))))},K=(a(99),function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to our Chat App!"),r.a.createElement("p",null,"Make an account or sign in with Google to use the chat bruh"))}),Y=(a(100),a(101),a(102),a(69)),z=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y.a,null,r.a.createElement(j.a,{variant:"h5",component:"h3"},this.props.message.displayName),r.a.createElement(j.a,{component:"p"},this.props.message.message)),r.a.createElement("br",null))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){a.setState({message:e.target.value})},a.onUserUpdate=function(e){var t=[];a.props.currentUser&&a.setState({currentUser:a.props.currentUser.displayName}),e.forEach((function(e){var n=e.data(),r=(n.message,n.timestamp,n.displayName);r!==a.state.currentUser&&t.push({key:e.id,doc:e,displayName:r})})),t.sort(),a.setState({userList:t})},a.onCollectionUpdate=function(e){var t=[];console.log("Collection Update"),a.props.currentUser&&a.setState({currentUser:a.props.currentUser.displayName}),console.log(a.state.currentUser),e.forEach((function(e){var n=e.data(),r=n.message,s=n.timestamp,l=n.displayName,o=n.group;console.log(e.id," => ",e.data()),o[0]!==a.state.currentReceiver&&o[1]!==a.state.currentReceiver||t.push({key:e.id,doc:e,message:r,timestamp:s,group:o,displayName:l})})),console.log(t),a.setState({list:t})},a.handleSubmit=function(e){var t=a.state,n=t.message,r=t.currentUser;e.preventDefault(),console.log("Message submit"),console.log(a.state);W.collection("messages").add({message:n,group:[a.state.currentUser,a.state.currentReceiver],timestamp:Date.now()/1e3|0,displayName:r});a.setState({message:""})},a.state={currentUser:a.props.currentUser,currentReceiver:"",message:"",list:[],userList:[]},a.ref=W.collection("messages"),a.userRef=W.collection("users"),a.unsubscribe=null,a.unsubscribe2=null,a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.orderBy("timestamp").where("group","array-contains",this.state.currentUser).onSnapshot(this.onCollectionUpdate),this.unsubscribe2=this.userRef.orderBy("displayName").onSnapshot(this.onUserUpdate)}},{key:"handleUserSelect",value:function(e){e.preventDefault(),this.setState({currentReceiver:e.target.innerText}),this.componentDidMount()}},{key:"sortList",value:function(e){}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.handleSubmit(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S.a,{container:!0,spacing:4},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(j.a,null,"USERS"),this.state.userList.map((function(t){return r.a.createElement("button",{className:"users",onClick:e.handleUserSelect.bind(e)},t.displayName)})),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement(v.a,{multiline:!0,rows:8,variant:"outlined",label:"Type message",name:"message",value:this.state.message,onChange:this.handleChange.bind(this),type:"text",onKeyPress:this.handleKeyPress.bind(this),fullWidth:!0,position:"static"}),r.a.createElement(w.a,{type:"submit",color:"primary"},"Send"))),r.a.createElement(S.a,{item:!0,xs:12},this.state.list.map((function(e,t,a){return r.a.createElement(z,{key:t,message:e})})))))}}]),t}(n.Component),_=function(e){var t=e.currentUser;return console.log("Chat Page"),console.log(t),r.a.createElement("div",null,r.a.createElement(J,{currentUser:t}))},V=(a(103),a(104),function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n))},e.handleSubmit=function(t){var a=e.state.message;t.preventDefault(),W.settings({timestampsInSnapshots:!0});W.collection("posts").add({content:a,messages:[],votes:0});e.setState({message:""})},e.state={message:"",messageList:[]},e}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(v.a,{multiline:!0,rows:8,variant:"outlined",label:"Make a new post!",name:"message",value:this.state.message,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(w.a,{type:"submit",color:"primary"},"Send")))}}]),t}(r.a.Component)),Z=a(68),$=a.n(Z),Q=a(155),X=a(158),ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.content,r=a.votes,s=a.messages;t.push({key:e.id,doc:e,content:n,votes:r,messages:s})})),a.setState({posts:t})},a.handleChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(u.a)({},r,n))},a.handleSubmit=function(e){var t=a.state.message;e.preventDefault();for(var n=0;n<a.state.posts.length;n++)if(a.state.posts[n].key==a.state.currentPost){var r=a.state.posts[n].messages;r.push(a.state.currentUser+": "+t);W.collection("posts").doc(a.state.currentPost).update({messages:r})}a.setState({message:""})},a.ref=W.collection("posts"),a.unsubscribe=null,a.state={posts:[],like:null,dislike:null,message:"",currentPost:"",currentUser:"N/A"},a.props.currentUser&&(a.state.currentUser=a.props.currentUser.displayName),a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleRespond",value:function(e){this.state.currentPost=e,this.setState(this.state)}},{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate)}},{key:"handleUpvote",value:function(e){console.log(e);for(var t=0;t<this.state.posts.length;t++)if(this.state.posts[t].key==e){var a=this.state.posts[t].votes+1;W.collection("posts").doc(e).update({votes:a})}this.setState(this.state)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.posts.map((function(t){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(O.a,null,r.a.createElement(X.a,{title:"Like"},r.a.createElement(Q.a,{"aria-label":"like"},r.a.createElement($.a,{onClick:function(){return e.handleUpvote(t.key)}}),"  ",t.votes)),r.a.createElement(j.a,null,t.content)),t.messages.map((function(e){return r.a.createElement("div",null,e)})),r.a.createElement(y.a,null,t.key==e.state.currentPost?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(v.a,{variant:"outlined",label:"response",name:"message",value:e.state.message,onChange:e.handleChange,fullWidth:!0}),r.a.createElement(w.a,{type:"submit",color:"primary"},"Send"))):r.a.createElement("div",null,r.a.createElement(w.a,{onClick:function(){return e.handleRespond(t.key)}},"RESPOND")))),r.a.createElement("br",null))})))}}]),t}(r.a.Component),te=function(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement(S.a,{container:!0,spacing:2},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(V,null)),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(ee,{currentUser:t}))))};a(107);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).unsubscribeFromSession=null,e.state={currentUser:null},e}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromSession=D.onAuthStateChanged(function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,x(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:ne({id:t.id},t.data())},(function(){console.log("nothing")})),console.log(e.state)})),t.next=9;break;case 7:e.setState({currentUser:a}),console.log(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromSession()}},{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement("div",null,r.a.createElement(F,{currentUser:e}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:K}),r.a.createElement(g.a,{path:"/signin",component:G}),r.a.createElement(g.a,{path:"/feed",render:function(t){return r.a.createElement(te,Object.assign({},t,{currentUser:e}))}}),r.a.createElement(g.a,{path:"/chat",render:function(t){return r.a.createElement(_,Object.assign({},t,{currentUser:e}))}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,a){e.exports=a(108)},91:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.78154f32.chunk.js.map